<!DOCTYPE html>
<html>
<head>
    <meta charset = "UTF-8">
    <title>My PlaceGuides</title>
    <script src = "./maps/api_key.js"></script>
    <script id = "maps-api" async defer></script>
    <link rel = "stylesheet" href = "style.css">
</head>
<body onload = "setApiKeyAndMapsCallback()">
    <header> 
        <ul>
            <li><a href = "index.html">Home</a></li>
            <li><a href = "discover.html">Discover</a></li>
            <li><a href = "myPlaceGuides.html">My PlaceGuides</a></li>
            <li><a href = "createPlaceGuide.html">Create PlaceGuide</a></li>
        </ul>
    </header>

    <input id = "search-box" type = "text" placeholder = "Search for a new place!"/>
    <div id = "map"></div>

    <script src = "./maps/geolocation.js"></script>
    <script src = "./maps/searchbox.js"></script>
    <script src = "./maps/place.js"></script>
    <script src = "./maps/show_places.js"></script>
    <script src="https://unpkg.com/@google/markerclustererplus@4.0.1/dist/markerclustererplus.min.js"></script>
    <script> 
         /** 
        * This function initialises the map and adds some functionalities to it:
        * Geolocation: to track the user's current location, display it and center the map around it.
        * Searching: lets the user search for places and center the map around it.
        * Display place guides: displays the place guides created by the currently logged in user.
        */
        function createMap() {
            var myMapOptions = {
                zoom: 2,
                center: new google.maps.LatLng(0, 0),
                mapTypeId: 'roadmap',
                restriction: {
                  latLngBounds: {north: 85, south: -85, west: -180, east: 180},
                  strictBounds: true
                }
            };
            const map = new google.maps.Map(
                document.getElementById('map'), myMapOptions);

            // Geolocation functionality.
            var geolocator = new Geolocator(map);
            geolocator.init();

            // Searching functionality.
            var searchResult =
                new Place(map, 0, 0, "Picked Location", null, PlaceType.SEARCH_RESULT, true);
            searchResult.map = map;
            searchResult.visible = false;
            var searchBox = new SearchBox(map, searchResult, "search-box");
            searchBox.init();

            // Discover public place guides functionality.
            var userId = "test";
            PlaceDisplayer.displayPlaceGuidesOfUser(map, userId);
        }
    </script>
</body>
</html>